<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>随机点名器</title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      .box {
        width: 60%;
        height: 300px;
        box-shadow: 0 0 15px 3px rgb(76, 0, 255);
        border-radius: 10px;
        margin: 240px auto;
        padding: 10px;
        /* text-align: center; */
        /* line-height: 300px; */
      }
      .box p {
        text-align: center;
        /* line-height: 140px; */
        margin: 20px auto;
        font-size: 30px;
      }
      .box .btn {
        width: 60%;
        margin: 30px auto 10px;
      }
      .box button {
        width: 100%;
        height: 50px;
        background-color: rgb(76, 0, 255);
        color: white;
        border: none;
        border-radius: 5px;
        margin: 10px auto;
        display: block;
        font-size: large;
        font-weight: 900;
        cursor: pointer;
      }

      .box button:active {
        background-color: rgb(76, 0, 255, 0.8);
      }

      #name {
        text-align: center;
        line-height: 30px;
        font-size: 20px;
        display: block;
        height: 30px;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <p>抽中的人是:</p>
      <h1 id="name"></h1>
      <div class="btn">
        <button>点名</button>
        <button>停止</button>
      </div>
    </div>
    <script>
      const names = [
        "小一",
        "小二",
        "小三",
        "小四",
        "小五",
        "小六",
        "小七",
        "小八",
        "小九",
        "小十",
      ];

      const btn1 = document.querySelector("button");
      const btn2 = document.querySelectorAll("button")[1];
      const name = document.querySelector("#name");

      let count = 0;
      let timer;

      //防止重复点击按钮

      btn1.addEventListener("click", function () {
        btn1.disabled = true;

        timer = setInterval(function () {
          name.innerHTML = names[count % names.length];
          count++;
        }, 100);
      });
      btn2.addEventListener("click", function () {
        if (count === 0) {
          return;
        }
        clearInterval(timer);
        count = 0;
        btn1.disabled = false;
        const random = Math.floor(Math.random() * names.length);
        name.innerHTML = names[random];
        names.splice(random, 1);
        if (names.length === 0) {
          btn1.disabled = true;
          btn2.disabled = true;
          name.innerHTML = "全部点完啦！";
        }
        console.log(names);
      });
    </script>
  </body>
</html>
